<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html xmlns:o=""><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"></meta><link rel="stylesheet" type="text/css" href="v8help://service_book/service_style"></link><meta name="GENERATOR" content="MSHTML 11.00.9600.18349"></meta></head><body>
<h1>План обмена "Обмен Управление нашей фирмой - Сайт"</h1>
<p><br>План обмена позволяет выполнять обмен данными (выгружать номенклатуру и обмениваться заказами покупателей) с сайтами (интернет-магазинами) поддерживающими обмен по стандарту <strong>CommerceML 2.05 или новее</strong>.<br><br>Для того, чтобы начать обмен между информационной базой и сайтом, необходимо создать и настроить узел обмена. Для этого нужно нажать на команду <strong>"Создать"</strong> формы списка узлов обмена. После выполнения команды будет вызван помощник настроек обмена с сайтами, позволяющий создать узел обмена и выполнить все необходимые настройки. Для каждого сайта необходимо создать свой узел обмена.</p>
<p>В программе предусмотрены следующие режимы обмена:</p>
<ul><li>Выгрузка всех данных, участвующих в обмене. Выполняется по команде <strong>"Выполнить полный обмен данными"</strong> в форме списка или форме узла плана обмена. 
</li><li>Выгрузка только тех объектов, которые изменились с момента последнего успешного сеанса обмена. Выполняется по команде <strong>"Выполнить обмен данными"</strong>. <br></li></ul><p class="Important">Важно. При первом сеансе обмена в новом или измененном узле обмена, независимо от команды запустившей обмен, будет выполнена полная выгрузка данных.</p>
<p>Форма узла обмена содержит несколько страниц, содержащих общие настройки обмена, а так же настройки для выгрузки номенклатуры и настройки для обмена заказами.</p>
<p><strong>Страница "Основные настройки".</strong></p>
<p>В группе <b>"Режим обмена данными"</b> выполняется настройка режимов обмена:</p>
<ul><li>если будет производится только выгрузка товаров, устанавливается флажок <strong>"Выгрузка товаров"</strong>; 
</li><li>если будет производится только обмен заказами, устанавливается флажок <b>"Обмен заказами"</b>; 
<ul><li>обмен оплатами и отгрузками - если сайт поддерживает частичные оплаты и отгрузки, можно загружать оплаты с типом "эквайринг" с сайта, и выгружать оплаты и отгрузки из 1С на сайт. Эта настройка позволяет выполнять частичные оплаты и отгрузки по заказу. 
</li><li>пробивать чеки по онлайн-оплатам - если доступна оплата заказов на сайте, можно загружать данные об онлайн-оплатах и пробивать чеки в 1С</li></ul></li><li>если будет производиться и выгрузка товаров, и обмен заказами, устанавливаются оба флажка.</li></ul><p>В группе <strong>"Назначение"</strong> настраивается подключение к сайту. Программа позволяет обмениваться с сайтом следующими способами:</p>
<ul><li>Непосредственно с сайтом (требуется подключение к сети Интернет). Для этого необходимо установить переключатель в группе <b>"Назначение"</b> в положение <b>"Выгружать на сайт"</b>. Далее указать адрес сайта, пользователя сайта (под которым будет производится подключение к сайту для обмена) и его пароль. C помощью команды <b>"Проверить соединение"</b> можно проконтролировать корректность введенных данных и узнать о возможности начать обмен с сайтом. 
</li><li>Посредством выгрузки/загрузки данных через промежуточные каталоги (не требуется подключение к сети Интернет). Для этого необходимо установить переключатель в группе <b>"Назначение"</b> в положение <b>"Выгружать в каталог на диске"</b>. Далее указать каталог на диске (поле <b>"Каталог выгрузки"</b>) в который будут выгружаться файлы обмена (при клиент-серверном варианте работы каталог выгрузки будет создан на сервере 1С). Если предполагается обмен заказами, то дополнительно нужно указать полное имя файла с заказами (поле <b>"Файл загрузки заказов"</b>), который будет формироваться на сайте.</li></ul><p><br>Программа позволяет обмениваться с сайтом в автоматическом режиме при помощи регламентного задания <b>"Обмен с сайтом"</b>. Для задания настроек необходимо установить флажок <b>"Использовать периодический обмен данными"</b> и установить расписание обмена.</p>
<p><strong>Страница "Выгрузка товаров".</strong></p>
<p>На странице устанавливаются настройки выгрузки товаров из информационной базы.</p>
<p class="Important">Важно. Для того, чтобы на сайт выгружались цены номенклатуры, необходимо выбрать один или несколько видов цен.  Для выбора доступны виды цен со способом расчета "Вручную" и "Рассчитывается". Товары без цен нужного вида не выгружаются на сайт.</p>
<p>Опция <strong>"Выгружать остатки товаров с разбиением по складам"</strong> определяет возможность передачи на сайт информации о наличии товаров на складах предприятия. При этом на сайт выгружается информация о складах (наименование, контактная информация) и о количестве товара на складе.<br><br>Программа позволяет выгружать на сайт изображения и файлы, присоединенные к номенклатуре. Для включения этого механизма необходимо установить флажок <strong>"Выгружать присоединенные файлы"</strong>. Выгружаются картинки с расширениями gif, jpg, jpeg, png и присодиненные файлы с расширениями pdf, xls, doc. Размер каждого файла не должен превышать 5 Мб.</p>
<p>Для интеграции с сайтом, обменом можно передавать произвольные реквизиты Номенклатуры в разделе "Выгружать доп. реквизиты номенклатуры:". Список реквизитов настраивается.</p>
<p>В группе <strong>"Таблица каталогов"</strong> настраивается соответствие каталогов номенклатуры инфоблокам сайта. Каждый каталог соответствует инфоблоку сайта. Для каждого инфоблока программа автоматически генерирует идентификатор каталога, который не рекомендуется менять. Для каждого каталога можно задать произвольное имя в поле "Каталог", отбор по группам или категориям номенклатуры, и при необходимости <a name="ebf9777b737347d59d19de2295b6fd7297b0a6001a6411a09811e03d9788c7a4b5">установить дополнительные отборы по:</a></p>
<ul><li>
<div>конкретным позициям номенклатуры; </div>
</li><li>количеству остатков номенклатуры. Выгрузка товаров на сайт не будет производится, если количество товарных остатков меньше указанного в фильтре значения; 
</li><li>
<div>складу для остатков. Можно задать склад или список складов, остатки с которых будут выгружаться на сайт; </div>
</li><li>
<div>произвольному фильтру. Можно составить любой другой отбор для номенклатуры.</div></li></ul><p>Для установки отбора необходимо выделить строку таблицы каталогов и нажать на команду <strong>"Настроить отбор"</strong>.<strong> </strong>Далее в форме отбора задать значения описанных выше фильтров и нажать на команду <strong>"Завершить редактирование" </strong>для сохранения настроек. Если необходимо временно отключить какой-либо отбор, не удаляя значение отбора, нужно снять флажок рядом с наименованием отбора.</p>
<p><strong>Страница "Обмен заказами".</strong></p>
<p>Обмен заказами происходит в два этапа: сначала загрузка с сайта, затем выгрузка на сайт (или в каталог на диске). По заказам, загруженным с сайта, формируются документы <a href="Document.ЗаказПокупателя/Help">"Заказ покупателя"</a>. При последующих сеансах обмена табличные части документов обновляются в соответствии с информацией, полученной с сайта. В ответном сообщении на сайт отправляется информация об оплате и отгрузке по заказам, ранее загруженным с сайта. Контрагенты и номенклатура, полученные с сайта, идентифицируются в соответствующих справочниках. Объекты, которые не найдены, создаются.</p>
<p>В поле <strong>"Способ загрузки контрагентов"</strong> задается способ, в соответствии с которым контрагент указанный в заказе на сайте будет сопоставляться с контрагентами в информационной базе. Возможны следующие способы:</p>
<ul><li>Поиск по реквизитам (телефону, email, наименованию), для юр.лиц - ИНН, КПП; 
</li><li>Не создавать. При загрузке заказа в информационную базу в документ <a href="Document.ЗаказПокупателя/Help">"Заказ покупателя"</a> будет подставлен заранее определенный контрагент, указанный в поле <strong>"Контрагент для подстановки в заказы"</strong>. </li></ul><p><br>В полях <strong>"Группа для новой номенклатуры"</strong> и <strong>"Группа для новых контрагентов"</strong> можно указать группы, в которые при загрузке заказов с сайта будут загружены элементы, не найденные в информационной базе. Если группы не заданы, не найденные элементы будут загружены в общий список.</p>
<p>Способ определения состояния заказа покупателя при выгрузке на сайт и загрузке с сайта в информационную базу зависит от флажка <strong>"Использовать несколько состояний заказов покупателей (три и более)"</strong> (расположен на закладке <strong>"Продажи"</strong> формы настроек параметров учета):</p>
<ul><li>если флажок установлен, становится видимой табличная часть <strong>"Соответствие статусов заказов"</strong>, в которой в поле <b>"Статус заказа на сайте"</b> строкой указывается значение статуса заказа на сайте, а в поле <b>"Состояние документа "Заказ покупателя""</b> задается соответствующий ему статус заказа в информационной базе. Если соответствие статусов установлено, при загрузке заказа с сайта программа выполняет поиск соответствующего ему состояния документа <a href="Document.ЗаказПокупателя/Help">"Заказ покупателя"</a> в информационной базе. При этом если состояние документа <a href="Document.ЗаказПокупателя/Help">"Заказ покупателя"</a>, соответствующее статусу полученному с сайта не найдено, у заказа устанавливается состояние по умолчанию. Для передачи информации об оплате или отгрузке заказа на сайт, необходимо изменить состояние документа <a href="Document.ЗаказПокупателя/Help">"Заказ покупателя"</a> и перезаписать документ. 
</li><li>если флажок не установлен, настройка соответствия статусов заказов не требуется. При загрузке заказа с сайта состояние документа <a href="Document.ЗаказПокупателя/Help">"Заказ покупателя"</a> в информационной базе определяется в соответствии со значениями состояний, заданными в настройках параметров учета. Информация об оплате/отгрузке заказа для передачи на сайт регистрируется автоматически при проведении документов оплаты/отгрузки. При этом заказ считается оплаченным/отгруженным, если он проведен и оплата/отгрузка по нему произведена полностью.</li></ul><p><strong>Доставка:</strong> Вместе с заказом покупателя может передаваться информация о доставке, которая заполняет закладку "Доставка" в заказе покупателя. Если таблица "Службы доставки" заполнена, первая доставка в Заказе покупателя загружается на закладку "Доставка", остальные доставки (если есть) загружаются в табличную часть Запасы как услуги. Если таблица не заполнена, доставка загружается в табличную часть "Запасы" как услуга. Для настройки соответствий доставки, переданных с сайта в 1С, нужно заполнить таблицу "Службы доставки". Для сайтов 1С-Битрикс можно загрузить способы доставки с сайта.</p>
<p><strong>Страница "Онлайн-оплаты".</strong></p>
<p>Если включена опция "Обмен оплатами и отгрузками" или "Загружать онлайн-оплаты", вместе с заказами с сайта загружаются данные об оплатах с типом "Эквайринг" - в документ "Операция по платежным картам". Если в 1С подключен ККТ, по оплате можно пробить электронный чек и отправить покупателю в смс или e-mail. Для загрузки заказов и оплат нужно задать отдельное расписание на закладке "Онлайн-оплаты".</p>
<p>Формирование и отправку онлайн-чеков можно настроить для работы в автоматическом режиме: для каждого вида оплаты на сайте нужно создать/выбрать и настроить Эквайринговый терминал с кассой ККМ, к которой подключено оборудование - ККТ для формирования онлайн-чеков. Согласно выбранному соответствию будут заполняться документы оплаты, загруженные с сайта. Для CMS 1С-Битрикс и 1С-UMI можно загрузить виды оплат с сайта. Создать виды оплат (Эквайринговые терминалы) в 1С можно автоматически по кнопке "Создать виды оплат в 1С". Чтобы пробитие чеков происходило автоматически, необходимо открыть обработку "Монитор онлайн оплат", открыть смену в кассе ККМ, проверить работу оборудования (ККТ), проверить работу обмена с сайтом. Пробитие онлайн чеков запускается автоматически после загрузки данных об оплатах с сайта.</p>
<p><strong>Начиная с версии формата CommerceML 2.10 поддерживаются частичные оплаты и отгрузки по заказу.</strong></p>
<p>"Обмен оплатами и отгрузками" включается на закладке "Основные настройки". Если опция включена, с сайта загружаются Заказ покупателя и его оплаты с видом "'эквайринг", выполненные на сайте. Введенные в 1С к заказу с сайта оплаты и отгрузки, передаются обменом на сайт и отображаются в личном кабинете покупателя. Поддерживаются частичные оплаты и отгрузки. Если включена опция "Пробивать чеки по онлайн-оплатам", по переданным с сайта оплатам может быть настроено автоматическое пробитие чека в 1С в Мониторе онлайн-оплат.</p>
<p>Если опция "Обмен оплатами и отгрузками" выключена, в 1С с сайта загружается заказ покупателя, далее в обмене с сайтом передается только изменение статуса заказа. Дополнительно, если включена опция "Пробивать чеки по онлайн-оплатам", в 1С передается факт оплаты заказа на сайте, по которому автоматически формируется документ "Операция по платежным картам" и может быть настроено автоматическое пробитие чека в 1С. В этом режиме поддерживаются только полные оплаты заказа одной суммой.</p>
<p><strong>Просмотр информации по обмену.</strong></p>
<p><a name="ebf9777b737347d59d19de2295b6fd7297b0a6001a6411a09811e03d9788c7a4b5">В форме списка узлов или форме узла обмена можно выполнять следующие действия:</a></p>
<ul style="MARGIN-LEFT: 40px"><li>посмотреть информацию о состоянии и событиях обмена; 
</li><li>посмотреть изменения в информационной базе, произошедшие с момента последнего обмена с сайтом.<br></li></ul><p><a name="ebf9777b737347d59d19de2295b6fd7297b0a6001a6411a09811e03d9788c7a4b5">Для того, чтобы посмотреть текущее состояние обмена, нужно открыть форму списка узлов обмена, в которой для каждого узла обмена отображается следующая информация: успешно или нет была произведена загрузка/выгрузка, дата и время последней загрузки/выгрузки. Информацию о выгрузке товаров и выгрузке/загрузке заказов можно расшифровать более детально.</a> Для этого необходимо воспользоваться командами <strong>"Выполнение обмена данными" - "События загрузки данных/События выгрузки данных"</strong>.</p>
<p><a name="ebf9777b737347d59d19de2295b6fd7297b0a6001a6411a09811e03d9788c7a4b5">Для того, чтобы посмотреть информацию об изменениях в информационной базе, которые будут выгружены на сайт в следующем сеансе обмена, необходимо воспользоваться командой <strong>"Выполнение обмена данными" - "Показать зарегистрированные изменения"</strong>. После выполнения команды будет открыта форма, показывающая объекты участвующие в обмене с сайтом и зарегистрированные для них изменения.</a><a name="ebf9777b737347d59d19de2295b6fd7297b0a6001a6411a09811e03d9788c7a4b5"> Любую регистрацию изменений объекта можно удалить из списка. Для этого необходимо в поле объекта нажать кнопку очистки.</a></p>
<p> </p></body></html>